<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V6 Enhanced Model Dashboard</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="dashboard-header">
            <h1>ðŸš€ V6 Enhanced Model Dashboard</h1>
            <div class="status-indicator">
                <span class="status-dot" id="systemStatus"></span>
                <span id="statusText">Connecting...</span>
            </div>
            <div class="last-update">
                Last Update: <span id="lastUpdate">--</span>
            </div>
        </header>

        <!-- System Overview -->
        <section class="card">
            <h2>ðŸ“Š System Overview</h2>
            <div class="overview-grid">
                <div class="overview-item">
                    <div class="overview-label">Mode</div>
                    <div class="overview-value" id="systemMode">--</div>
                </div>
                <div class="overview-item">
                    <div class="overview-label">Confidence Threshold</div>
                    <div class="overview-value" id="confidenceThreshold">--</div>
                </div>
                <div class="overview-item">
                    <div class="overview-label">Average Accuracy</div>
                    <div class="overview-value" id="avgAccuracy">--</div>
                </div>
                <div class="overview-item">
                    <div class="overview-label">Architecture</div>
                    <div class="overview-value small" id="architecture">--</div>
                </div>
            </div>
        </section>

        <!-- Data Sources -->
        <section class="card">
            <h2>ðŸ“¡ Data Sources</h2>
            <div class="data-sources-grid">
                <div class="source-card" id="sourceCoinbase">
                    <div class="source-header">
                        <span class="source-name">Coinbase</span>
                        <span class="source-status"></span>
                    </div>
                    <div class="source-type">--</div>
                    <div class="source-interval">--</div>
                    <div class="source-desc">--</div>
                </div>
                <div class="source-card" id="sourceKraken">
                    <div class="source-header">
                        <span class="source-name">Kraken</span>
                        <span class="source-status"></span>
                    </div>
                    <div class="source-type">--</div>
                    <div class="source-interval">--</div>
                    <div class="source-desc">--</div>
                </div>
                <div class="source-card" id="sourceCoingecko">
                    <div class="source-header">
                        <span class="source-name">CoinGecko</span>
                        <span class="source-status"></span>
                    </div>
                    <div class="source-type">--</div>
                    <div class="source-interval">--</div>
                    <div class="source-desc">--</div>
                </div>
            </div>
        </section>

        <!-- Live Predictions -->
        <section class="card">
            <h2>ðŸŽ¯ Live Predictions</h2>
            <div class="predictions-grid">
                <div class="prediction-card" id="predBTC">
                    <h3>BTC-USD</h3>
                    <div class="prediction-chart-container">
                        <canvas id="chartBTC"></canvas>
                    </div>
                    <div class="prediction-info">
                        <div class="prediction-direction" id="directionBTC">--</div>
                        <div class="prediction-confidence" id="confidenceBTC">--</div>
                        <div class="prediction-tier" id="tierBTC">--</div>
                    </div>
                    <div class="prediction-time" id="timeBTC">--</div>
                </div>
                <div class="prediction-card" id="predETH">
                    <h3>ETH-USD</h3>
                    <div class="prediction-chart-container">
                        <canvas id="chartETH"></canvas>
                    </div>
                    <div class="prediction-info">
                        <div class="prediction-direction" id="directionETH">--</div>
                        <div class="prediction-confidence" id="confidenceETH">--</div>
                        <div class="prediction-tier" id="tierETH">--</div>
                    </div>
                    <div class="prediction-time" id="timeETH">--</div>
                </div>
                <div class="prediction-card" id="predSOL">
                    <h3>SOL-USD</h3>
                    <div class="prediction-chart-container">
                        <canvas id="chartSOL"></canvas>
                    </div>
                    <div class="prediction-info">
                        <div class="prediction-direction" id="directionSOL">--</div>
                        <div class="prediction-confidence" id="confidenceSOL">--</div>
                        <div class="prediction-tier" id="tierSOL">--</div>
                    </div>
                    <div class="prediction-time" id="timeSOL">--</div>
                </div>
            </div>
        </section>

        <!-- Signal Statistics (24h) -->
        <section class="card">
            <h2>ðŸ“ˆ Signal Statistics (24h)</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Signals</div>
                    <div class="stat-value" id="totalSignals">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Average Confidence</div>
                    <div class="stat-value" id="avgConfidence">--</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Hourly Rate</div>
                    <div class="stat-value" id="hourlyRate">--</div>
                </div>
            </div>
            <div class="stats-breakdown">
                <div class="breakdown-section">
                    <h4>By Symbol</h4>
                    <div id="statsBySymbol" class="breakdown-content">--</div>
                </div>
                <div class="breakdown-section">
                    <h4>By Direction</h4>
                    <div id="statsByDirection" class="breakdown-content">--</div>
                </div>
                <div class="breakdown-section">
                    <h4>By Tier</h4>
                    <div id="statsByTier" class="breakdown-content">--</div>
                </div>
            </div>
        </section>

        <!-- Recent Signals -->
        <section class="card">
            <h2>ðŸ”” Recent Signals</h2>
            <div class="table-container">
                <table class="signals-table">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Symbol</th>
                            <th>Direction</th>
                            <th>Confidence</th>
                            <th>Tier</th>
                        </tr>
                    </thead>
                    <tbody id="recentSignalsTable">
                        <tr>
                            <td colspan="5" class="no-data">Loading signals...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Model Analysis Process -->
        <section class="card">
            <h2>ðŸ”¬ Analysis Process</h2>
            <div class="process-flow">
                <div class="process-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Data Collection</h4>
                        <p>Fetch 1-minute OHLCV candles from Coinbase, Kraken backup, and CoinGecko fundamentals</p>
                    </div>
                </div>
                <div class="process-arrow">â†’</div>
                <div class="process-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Feature Engineering</h4>
                        <p>Generate 72 Amazon Q features: EMAs, MACDs, RSI, Bollinger Bands, Stochastic, Williams %R, Momentum, ROC</p>
                    </div>
                </div>
                <div class="process-arrow">â†’</div>
                <div class="process-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Model Inference</h4>
                        <p>V6 Enhanced FNN: 4-layer feedforward (72â†’256â†’128â†’64â†’3) with softmax output</p>
                    </div>
                </div>
                <div class="process-arrow">â†’</div>
                <div class="process-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Signal Generation</h4>
                        <p>Filter predictions by 65% confidence threshold and classify into high/medium/low tiers</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <p>V6 Enhanced Model Dashboard | Auto-refresh every 5 seconds | Model Version: v6_enhanced</p>
        </footer>
    </div>

    <script src="/static/js/dashboard.js"></script>
</body>
</html>
